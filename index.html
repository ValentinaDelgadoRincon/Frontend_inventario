<!DOCTYPE html>
<html>

<head>
  <base target="_top" />
  <link rel="stylesheet" href="style.css" />
</head>

<body onload="initializeApp()">
  <div class="app-container">
    <nav class="sidebar">
      <div class="sidebar-header">
        <h1>Inventario GameVance</h1>
      </div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a class="nav-link" onclick="showTab('productos')">
            <span class="nav-icon">üì¶</span> Nuevo producto
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showTab('inventario')">
            <span class="nav-icon">üìã</span> Inventario
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showTab('buscar')">
            <span class="nav-icon">üîç</span> Buscar
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showTab('compras')">
            <span class="nav-icon">üõí</span>Compras
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="showTab('historialCompras')">
            <span class="nav-icon">üìú</span> Historial de Compras
          </a>
        </li>


      </ul>
    </nav>

    <div class="main-content">
      <!-- PRODUCTOS -->
      <div id="productos" class="tab-content">
        <div class="content-header">
          <h2>Gesti√≥n de Productos</h2>
        </div>
        <div class="content-body">
          <div class="card">
            <div class="card-header">Registrar Nuevo Producto</div>
            <div class="card-body">
              <form id="formProducto" onsubmit="registrarProducto(event)">
                <div class="form-grid">
                  <div class="form-group">
                    <label for="nombreProd">Nombre *</label>
                    <input id="nombreProd" type="text" placeholder="Nombre del producto" required />
                  </div>

                  <div class="form-group">
                    <label for="tipoProd">Tipo *</label>
                    <input id="tipoProd" type="text" placeholder="Categor√≠a o tipo del producto" required />
                  </div>

                  <div class="form-group">
                    <label for="provProd">Proveedor *</label>
                    <input id="provProd" type="text" placeholder="Proveedor del producto" required />
                  </div>

                  <div class="form-group">
                    <label for="precioProd">Precio *</label>
                    <input id="precioProd" type="number" min="0" step="0.01" placeholder="Precio del producto"
                      required />
                  </div>

                  <div class="form-group">
                    <label for="stockMinProd">Stock M√≠nimo</label>
                    <input id="stockMinProd" type="number" min="0" value="0" />
                  </div>
                </div>

                <div class="actions">
                  <button type="submit" class="btn btn-success">
                    Registrar Producto
                  </button>
                  <button type="button" class="btn btn-secondary" onclick="limpiarFormProducto()">
                    Limpiar
                  </button>
                </div>
              </form>
              <div id="msgProd"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- INVENTARIO -->
      <div id="inventario" class="tab-content">
        <div class="content-header">
          <h2>Control de Inventario</h2>
        </div>
        <div class="content-body">
          <div class="card">
            <div class="card-header">Stock Actual</div>
            <div class="card-body">
              <div class="actions">
                <button class="btn btn-primary" onclick="mostrarStock()">
                  Actualizar Stock
                </button>
                <button class="btn btn-success" onclick="exportarStock()">
                  Exportar CSV
                </button>
                <button class="btn btn-warning" onclick="mostrarAlertas()">
                  Solo Alertas
                </button>
              </div>
              <div id="loading" class="loading">Cargando inventario...</div>
              <div class="table-container">
                <div id="stockTable"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- BUSCAR -->
      <div id="buscar" class="tab-content">
        <div class="content-header">
          <h2>B√∫squeda de Productos</h2>
        </div>
        <div class="content-body">
          <div class="card">
            <div class="card-header">Buscar Productos</div>
            <div class="card-body">
              <div class="form-grid">
                <div class="form-group">
                  <label for="buscarTexto">Buscar por c√≥digo o nombre</label>
                  <input id="buscarTexto" type="text" placeholder="Escriba para buscar..."
                    onkeyup="buscarEnTiempoReal()" />
                </div>
              </div>
              <div class="actions">
                <button class="btn btn-primary" onclick="buscarProducto()">
                  Buscar
                </button>
                <button class="btn btn-secondary" onclick="limpiarBusqueda()">
                  Limpiar
                </button>
              </div>
              <div class="table-container">
                <div id="resultadosBusqueda"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- COMPRAS -->
      <div id="compras" class="tab-content">
        <div class="content-header">
          <h2>Compras</h2>
        </div>
        <div class="content-body">
          <div class="card">
            <div class="card-header">Registrar Compra</div>
            <div class="card-body">
              <form id="formCompra" onsubmit="simularCompra(event)">
                <div class="form-grid">
                  <div class="form-group">
                    <label for="nombreCompra">Nombre del producto *</label>
                    <input id="nombreCompra" type="text" placeholder="Nombre del producto" required />
                  </div>
                  <div class="form-group">
                    <label for="cantidadCompra">Cantidad *</label>
                    <input id="cantidadCompra" type="number" min="1" placeholder="Cantidad que desea comprar"
                      required />
                  </div>
                </div>
                <div class="actions">
                  <button type="submit" class="btn btn-success">Registrar Compra</button>
                  <button type="button" class="btn btn-secondary" onclick="limpiarFormCompra()">Limpiar</button>
                </div>
              </form>
              <div id="msgCompra"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- HISTORIAL DE COMPRAS -->
      <div id="historialCompras" class="tab-content">
        <div class="content-header">
          <h2>Historial de Compras</h2>
        </div>
        <div class="content-body">
          <div class="card">
            <div class="card-header">Registro de Compras</div>
            <div class="card-body">
              <table id="tablaHistorialCompras">
                <thead>
                  <tr>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Precio Unitario</th>
                    <th>Costo Total</th>
                    <th>Fecha</th>
                    <th>Hora</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
              <div class="actions" style="margin-top: 15px;">
                <button class="btn btn-danger" onclick="limpiarHistorialCompras()">üßπ Limpiar Historial</button>
              </div>
            </div>
          </div>
        </div>
      </div>


    </div>
  </div>

  <script src="script.js"></script>
</body>

</html>